<example-image-item>
  <div class="example-image-item-wrapper">
    <pre if={state.labelTextValue !== "" && state.showLabelBefore} class="example-item-label-vertical"
        style={nvhFormattingEditor.getCssStyles(props.state, props.labelStyles)}>
      {state.labelTextValue}
    </pre>
    <img id="example-image-item-image" if={state.showImage && !state.makeImageClickable} src={props.value} style={nvhFormattingEditor.getCssStyles(props.state, props.styles)}/>
    <a if={state.showImage && state.makeImageClickable} href={props.value} target="_blank">
      <img src={props.value} style={nvhFormattingEditor.getCssStyles(props.state, props.styles)}/>
    </a>
    <div class="example-image-item-icons">
      <a if={state.showUrl && !state.showUrlAsIcon} href={props.value}>{props.value}</a>
      <a if={state.showUrl && state.showUrlAsIcon} href={props.value}>
        <pre>{nvhFormattingEditor.getIcon(state.iconItem)}</pre>
      </a>
      <a if={state.showUrl && state.showUrlAsIcon} href={props.value}>
        <pre>{nvhFormattingEditor.getUnicodeIcon(state.unicodeIcon)}</pre>
      </a>
    </div>
    <pre if={state.labelTextValue !== "" && !state.showLabelBefore} class="example-item-label-vertical"
        style={nvhFormattingEditor.getCssStyles(props.state, props.labelStyles)}>
      {state.labelTextValue}
    </pre>
  </div>

  <script>
    export default {
      state: {
        showImage: null,
        showUrl: null,
        makeImageClickable: null,
        showUrlAsIcon: null,
        iconItem: null,
        unicodeIcon: null,
        labelTextValue: null,
        showLabelBefore: null,
      },
      nvhFormattingEditor: null,

      onBeforeMount(props) {
        this.nvhFormattingEditor = window.nvhFormattingEditor;
        this.setDefaultCss();
        this.state = {
          showImage: props.styles["show-image"] === undefined ? true : props.styles["show-image"],
          showUrl: props.styles["show-url"] === undefined ? true : props.styles["show-url"],
          makeImageClickable: props.styles["make-image-clickable"],
          showUrlAsIcon: props.styles["show-url-as-icon"],
          iconItem: props.styles["icon-item"],
          unicodeIcon: props.styles["unicode-icon"],
          labelTextValue: props.labelStyles === undefined || props.labelStyles["label-text-value"] === undefined ? "" : props.labelStyles["label-text-value"],
          showLabelBefore: props.labelStyles === undefined || props.labelStyles["show-label-before"] === undefined ? true : props.labelStyles["show-label-before"],
        };
      },
      onBeforeUpdate(props) {
        this.state = {
          showImage: props.styles["show-image"] === undefined ? true : props.styles["show-image"],
          showUrl: props.styles["show-url"] === undefined ? true : props.styles["show-url"],
          makeImageClickable: props.styles["make-image-clickable"],
          showUrlAsIcon: props.styles["show-url-as-icon"],
          iconItem: props.styles["icon-item"],
          unicodeIcon: props.styles["unicode-icon"],
          labelTextValue: props.labelStyles === undefined || props.labelStyles["label-text-value"] === undefined ? "" : props.labelStyles["label-text-value"],
          showLabelBefore: props.labelStyles === undefined || props.labelStyles["show-label-before"] === undefined ? true : props.labelStyles["show-label-before"],
        }
      },

      setDefaultCss() {
        if (this.props.styles["margin"] === undefined) {
          this.props.styles["margin"] = "20";
        }
        if (this.props.styles["border-radius"] === undefined) {
          this.props.styles["border-radius"] = "50";
        }
      },
    }
  </script>

  <style>
    .example-image-item-wrapper {
      display: flex;
      flex-direction: column;
    }
    .example-image-item-icons {
      display: flex;
      align-items: center;
    }
  </style>
</example-image-item>