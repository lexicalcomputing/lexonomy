<VirtualHost *:80>
        ServerName lexonomy.eu
        ServerAlias www.lexonomy.eu
        SetOutputFilter DEFLATE

        RewriteEngine On
        RewriteCond %{HTTPS} off
        RewriteRule (.*) https://www.lexonomy.eu%{REQUEST_URI} [R,NE]
</VirtualHost>

<VirtualHost *:443>
        ServerName lexonomy.eu
        ServerAlias www.lexonomy.eu
        SetOutputFilter DEFLATE

        RewriteEngine on
        RewriteCond %{HTTP_HOST} ^lexonomy\.eu$
        RewriteRule (.*) https://www.lexonomy.eu%{REQUEST_URI} [R,NE]

        SSLEngine on
        SSLCACertificateFile /path/to/the/file
        SSLCertificateFile /path/to/the/file
        SSLCertificateKeyFile /path/to/the/file

        CustomLog logs/lexonomy_access_log combined
        ErrorLog logs/lexonomy_error_log
        DocumentRoot  /var/www/lexonomy

        AliasMatch "^/(furniture|libs|docs)(.*)" "/path/to/installation/directory/lexonomy/website/$1$2"

####### Uncomment for CGI processing (and comment out mod_wsgi section)
###     ScriptAlias / /path/to/installation/directory/lexonomy/website/lexonomy.py/
####### mod_wsgi
        WSGIDaemonProcess lexonomy user=apache group=corpadm processes=20 threads=1 home=/path/to/installation/directory/lexonomy/website/
        WSGIProcessGroup lexonomy
        WSGIApplicationGroup %{GLOBAL}
        WSGIScriptAlias / /path/to/installation/directory/lexonomy/website/lexonomy.py

        # this causes preloading of the app for all processes beforehand, otherwise you get delays until you randomly hit all the 20 initialized
        WSGIImportScript /path/to/installation/directory/lexonomy/website/lexonomy.py process-group=lexonomy application-group=%{GLOBAL}

        #UNCOMMENT FOLLOWING LINE TO GET TRACEBACKS
        #SetEnv DEBUG 1

        <Directory /path/to/installation/directory/lexonomy/website>
                Require all granted
        </Directory>

######## UNCOMMENT FOLLOWING IF YOU PREFER STANDALONE SERVER INSTEAD OF CGI
#
#        ProxyTimeout 600
#        ProxyRequests  Off
#        ProxyPreserveHost On
#        ProxyVia Full
#        <Proxy *>
#                Require all granted
#        </Proxy>
#        <Location />
#                ProxyPass http://127.0.0.1:8000/
#                ProxyPassReverse http://127.0.0.1:8000/
#                #https://access.redhat.com/solutions/54579
#                SetEnv proxy-nokeepalive 1
#        </Location>

</VirtualHost>
